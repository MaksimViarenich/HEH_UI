<div mat-dialog-content class="mat-dialog-content">

  <div class="add-discount-header">
    <div class="add-discount-title">{{ 'vendors.add-vendor.add-dsk' | translate }}</div>
  </div>

  <div class="add-discount-info">
    <div class="add-discount-fields">
      <mat-form-field appearance="outline" class="add-discount-address">
        <mat-label>{{ 'vendors.add-discount.address' | translate }}</mat-label>
        <mat-select [formControl]="address"
                    [(ngModel)]="data.discount.addressesIds"
                    multiple required>
          <mat-option *ngFor="let address of data.addresses"
                      [value]="address.id">{{address?.country?.country}}, {{address?.city?.name}}
            , {{address?.street}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="add-discount-phone">
        <mat-label>{{ 'vendors.add-discount.phone' | translate }}</mat-label>
        <mat-select [formControl]="phone"
                    [(ngModel)]="data.discount.phonesIds"
                    multiple required>
          <mat-option *ngFor="let phone of data.phones"
                      [value]="phone.id">{{phone.number}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field class="add-discount-name" appearance="outline">
        <mat-label>{{ 'vendors.add-discount.promo' | translate }}</mat-label>
        <input matInput
               [(ngModel)]="discountDetail.promoCode"
               [formControl]="promoCode"
               required>
      </mat-form-field>

      <mat-form-field class="add-discount-description" appearance="outline">
        <mat-label>{{ 'vendors.add-discount.description' | translate }}</mat-label>
        <input matInput
               [(ngModel)]="discountDetail.conditions"
               [formControl]="conditions"
               required>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{ 'vendors.add-discount.start' | translate }}</mat-label>
        <input matInput
               [(ngModel)]="discountDetail.startDate"
               [matDatepicker]="pickerStart"
               [formControl]="date"
               required>
        <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
        <mat-datepicker #pickerStart></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{ 'vendors.add-discount.end' | translate }}</mat-label>
        <input matInput
               [(ngModel)]="discountDetail.endDate"
               [matDatepicker]="pickerEnd">
        <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
        <mat-datepicker #pickerEnd></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="outline" class="add-discount-category">
        <mat-label>{{ 'vendors.add-discount.category' | translate }}</mat-label>
        <mat-select [formControl]="category"
                    [(ngModel)]="discountDetail.categoryId"
                    (ngModelChange)="showTagList()"
                    required>
          <mat-option *ngFor="let category of categoriesAll"
                      [value]="category.id">{{category.name}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline" class="add-discount-tag">
        <mat-label>{{ 'vendors.add-discount.tag' | translate }}</mat-label>
        <mat-select [formControl]="tag"
                    [(ngModel)]="discountDetail.tagsIds"
                    disabled="{{!discountDetail.categoryId}}"
                    multiple>
          <mat-option *ngFor="let tag of tagsByCategory"
                      [value]="tag.id">{{tag.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="add-discount-button">
      <button mat-button mat-dialog-close>{{ 'vendors.add-discount.cancel' | translate }}</button>
      <button mat-raised-button
              mat-dialog-close
              (click)=saveDiscount(discountDetail)>{{ 'vendors.add-discount.subm' | translate }}</button>
    </div>
  </div>
</div>
